webpackJsonp([34],{"66W4":function(e,t){},jaoO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=a("bOdI"),s=a.n(n),r=a("INCx"),o=a.n(r),l=a("X2Oc"),c={name:"point",components:{},data:function(){return{frozenVisible:!1,unfrozenVisible:!1,rewardVisible:!1,is_pointrecord:0,form_errors:[],cur_entity:{},add_url:"/api/point/insert_update",list_url:"/api/user/point/sort",del_url:"/api/point/del",del_list:new URLSearchParams,tableData:[],select_word:"",cur_page:1,page_size:10,total:0,multipleSelection:[],editVisible:!1,createVisible:!1,form:{}}},created:function(){this.getData()},updated:function(){this.$desensitive()},computed:{},filters:{formatDate:function(e){var t=new Date(o()(1e3*e));return Object(l.c)(t,"yyyy-MM-dd HH:mm:ss")},statusFilter:function(e){return{0:"info",1:"success",2:"danger"}[e]}},methods:(i={changeType:function(e){this.getData()},checkSelected:function(){return!!this.cur_entity.id||(this.$message.info("请选择数据"),!1)},sortChange:function(e,t,a){this.sortcolumn=e.prop,this.sortorder=e.order,this.getData()},viewUser:function(){this.cur_entity.id?this.$router.push({name:"viewuser",params:this.cur_entity}):this.$message.info("请选择数据")}},s()(i,"checkSelected",function(){return!!this.cur_entity.id}),s()(i,"doCreate",function(e){var t=this;this.$axios.post(this.add_url,Object(l.h)(this.form)).then(function(e){1==e.data.status?(t.$message.success("操作成功"),t.getData()):t.$message.error("操作失败, 错误码:"+e.data.status+e.data.msg),t.createVisible=!1,t.editVisible=!1})}),s()(i,"getData",function(){var e=this;this.$axios.get(this.is_pointrecord?"api/user/point/log":this.list_url,{params:{search:this.select_word,page_index:this.cur_page,page_size:this.page_size,sortcolumn:this.sortcolumn,sortorder:this.sortorder}}).then(function(t){e.tableData=t.data.result,e.total=t.data.total})}),s()(i,"handleSizeChange",function(e){this.page_size=e,this.getData()}),s()(i,"handleCurrentChange",function(e){this.cur_page=e,this.getData()}),s()(i,"handleCurrentChangeRow",function(e){this.cur_entity=e}),s()(i,"search",function(){this.getData()}),s()(i,"handleEdit",function(e,t){this.form_errors=[],this.editVisible=!0,this.form=t,delete this.form.password,delete this.form.create_time,this.form.enable=1==t.enable?"1":"0"}),s()(i,"handleSelectionChange",function(e){this.multipleSelection=e}),s()(i,"dataDel",function(e){var t=this,a=null;if(e)a=e;else{if(this.multipleSelection.length<=0)return void this.$message.info("未选择任何数据");this.del_list=this.multipleSelection.map(function(e){return e.id}),a=this.del_list}this.$confirm("是否确认此操作","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post(t.del_url,Object(l.h)({id:a})).then(function(e){e.data.status>=1?(t.getData(),t.$message.success("删除成功")):t.$message.error("删除失败, 错误码: "+e.data.status)})}).catch(function(){})}),i)},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-tickets"}),e._v(" 俗事\n      ")]),e._v(" "),a("el-breadcrumb-item",[e._v("积分")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:!e.is_pointrecord,expression:"!is_pointrecord"}],staticClass:"handle-input mr10",attrs:{size:"mini",placeholder:"关键词"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search()}},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.is_pointrecord,expression:"!is_pointrecord"}],attrs:{size:"mini",type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")]),e._v(" "),a("el-checkbox",{staticStyle:{"margin-bottom":"10px"},on:{change:e.changeType},model:{value:e.is_pointrecord,callback:function(t){e.is_pointrecord=t},expression:"is_pointrecord"}},[e._v("积分记录")])],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.is_pointrecord,expression:"!is_pointrecord"}],attrs:{data:e.tableData,border:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleCurrentChangeRow,"sort-change":e.sortChange}},[a("el-table-column",{attrs:{prop:"no",label:"排名","min-width":"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"名称","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"insight_sensitive"},[e._v(e._s(t.row.nickname?t.row.nickname:t.row.username)+" ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"total_points",label:"总积分","min-width":"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"hornor",label:"称号","min-width":"180"}})],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.is_pointrecord,expression:"is_pointrecord"}],attrs:{data:e.tableData,border:"","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleCurrentChangeRow,"sort-change":e.sortChange}},[a("el-table-column",{attrs:{prop:"operator",label:"操作人","min-width":"150",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"insight_sensitive"},[e._v(e._s(t.row.operator)+" ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"时间","min-width":"100",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.create_time)))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"操作","min-width":"100",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"frozen_points",label:"冻结积分","min-width":"100",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"available_points",label:"可用积分","min-width":"100",sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.available_points))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"message_id",label:"消息编号","min-width":"180",sortable:"custom"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.cur_page,"page-sizes":[10,20,50,100],"page-size":e.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.cur_page=t},"update:current-page":function(t){e.cur_page=t},"update:pageSize":function(t){e.page_size=t},"update:page-size":function(t){e.page_size=t},"update:total":function(t){e.total=t}}})],1)],1)])},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("66W4")},"data-v-19317a8e",null);t.default=d.exports}});
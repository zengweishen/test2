webpackJsonp([33],{"8V5w":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("X2Oc"),s=r("8+FI"),o={data:function(){return{upload_cover_url:!1,ruleForm:{},rules:{}}},methods:{handleAvatarSuccess:function(e,t){this.ruleForm.avatar=e.path,this.upload_cover_url=e.path,console.log(this.ruleForm.avatar)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type|"image/png"===e.type,r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},submitForm:function(e){var t=this;this.$confirm("是否确认此操作","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("/api/user/setting",Object(a.h)(t.ruleForm)).then(function(e){e.data.status>=1?(t.$message.success("修改成功"),s.a.$emit("updateUserInfo","")):t.$message.error("失败,  "+e.data.msg)})})},resetForm:function(e){this.$refs[e].resetFields()}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"crumbs"},[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[r("i",{staticClass:"el-icon-tickets"}),e._v(" 个人设置\n      ")])],1)],1),e._v(" "),r("div",{staticClass:"container"},[r("div",{staticClass:"block",staticStyle:{width:"50%"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[r("el-input",{model:{value:e.ruleForm.nickname,callback:function(t){e.$set(e.ruleForm,"nickname",t)},expression:"ruleForm.nickname"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"头像",prop:"avatar"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/avatar/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.upload_cover_url?r("img",{staticClass:"avatar",attrs:{src:e.upload_cover_url}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),r("br"),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])])},staticRenderFns:[]};var i=r("VU/8")(o,l,!1,function(e){r("TH5X")},"data-v-1a225882",null);t.default=i.exports},TH5X:function(e,t){}});